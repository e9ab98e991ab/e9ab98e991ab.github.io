<div class="detail lh2"><p>阅读以下有关嵌入式系统设计的说明，在答题纸上回答问题1至问题3。<br/>【说明】<br/>某公司承接了某机载嵌入式系统的研制任务。该机载嵌入式系统由数据处理模块、大容量模块、信号处理模块、数据交换模块和电源模块等组成。数据处理模块有2个，分别完成数据融合和导航通讯任务；大容量模块主要功能是存储系统数据，同时要记录信号处理模块、数据处理模块的自检测、维护数据，向数据处理模块提供地图数据；信号处理模块的处理器为专用的DSP，接收红外、雷达等前端传感器数据并进行处理，将处理后的有效数据（数据带宽较大）发送给数据处理模块；数据交换模块主要负责系统的数据交换；电源模块主要负责给其他模块供电，电源模块上没有软件。<br/>要求该机载嵌入式系统符合综合化、模块化的设计思想，并考虑系统在生命周期中的可靠性和安全性，以及硬件的可扩展性和软件可升级性，还要求系统通讯延迟小，支持多模块上的应用任务同步。</p><br/><br/><div>
【问题1】（14分）</div>
<div>
在设计系统架构时，李工提出了如图3-1所示的系统架构，即模块间的网络通信采用光纤通信（Fiber Channel，FC）技术，而王工认为应采用VME总线架构，如图3-2所示。王工的理由是公司多年来基于VME总线技术设计了多个产品，技术成熟，且费用较小。但公司经过评审后，决定采用图3-1所示的基于FC的系统结构。</div>
<div>
<br/>
<center>
<img src="https://lstatic.xisaiwang.com/tiku/UploadFiles/2012-8/821_507204.jpg"/></center>
</div>
<div>
 </div>
<div>
<div>
请用500字以内的文字，说明VME和FC各自的特点，并针对机载嵌入式系统的要求，指出公司采用李工方案的理由。</div>
<div>
【问题2】（5分）</div>
<div>
公司依据ARINC653标准，设计了满足ARINC653标准的操作系统，该操作系统对系统中可能发生的模块级、分区级和进程级的错误进行处理，实现了如图3-3所示的系统健康监控机制，请分别将备选答案中的各种错误和健康监控部件填入图3-3中的（1）～（5）。</div>
</div>
<div>
 </div>
<center><img src="https://img.kuaiwenyun.com/images/shiti/2021-05/503/4sGENHDHg7.png" style="max-width:100%;"/><br/></center>
<div>
 </div>
<div>
<div>
备选答案：分区健康监控、分区初始化阶段出现的分区配置错误、分区切换时出现的错误、应用进程错误、进程健康监控。</div>
<div>
注：ARINC653标准（Avionics Application Software Standard Interface）是美国航空电子工程协会AEEC于1997年为航空民用飞机的模块化综合航空电子系统定义的应用程序接口标准，该标准提出了分区（Partition）的概念以及健康监控（health monitoring）机制。分区是应用的一种功能划分，也是操作系统调度的基本单位，严格按预先分配的时间片调度。分区间具有时空隔离特点。分区内的每一执行单元称为进程。</div>
<div>
【问题3】（6分）</div>
<div>
为了实现满足ARINC653标准的操作系统的时空分区隔离机制，项目组选择了PowerPC作为数据处理模块的处理器（CPU）。这样，当一个分区出现故障时，不会蔓延到模块中同一处理器的其他分区。请用500字以内的文字，说明如何采用PowerPC实现应用与内核以及诸应用之间的隔离和保护。</div>
</div><br/><br/>答案<br/><div>
【问题1】</div>
<div>
1、VME总线采用存储映射方式，多主机仲裁机制，同一时刻由单一主机控制，同时仲裁机制为菊花链方式。针对本系统要求，采用VME方案存在如下问题：</div>
<div>
（1）当多主机设备仲裁时，按菊花链的连接次序将一个主机处理完成后，才能将控制权交给另一主机来控制总线，导致任务执行延时大，不能满足“系统通讯延迟小”以及“支持多模块上的应用任务同步”的要求。</div>
<div>
（2）VME总线方式限制了可扩展性。与FC相比，VME总线实时性差，带宽低。</div>
<div>
2、FC采用消息包交换机制，支持广播和组播。针对本系统要求，采用FC方案有以下优点：</div>
<div>
（1）由于采用消息包交换机制，支持广播和组播，任务执行并发性好，能满足“系统通讯延迟小”以及“支持多模块上的应用任务同步”的要求。</div>
<div>
（2）FC的误码率低，可靠性高。与 VME比较，FC实时性好，带宽高。</div>
<div>
（3）允许在同一接口上传输多种不同的协议，对上层应用实现提供了便利。</div>
<div>
（4）FC采用消息机制，FC可扩展性好，如模块较多可采用多个FC网络交换模块级联。  </div>
<div>
（5）FC的传输距离远，当与外部其他设备相连时，比较方便。</div>
<div>
（6）系统采用统一的FC网络代替了VME底板总线，降低总线驱动的功耗，简化了底板。</div>
<div>
【问题2】</div>
<div>
<img alt="" src="https://lstatic.xisaiwang.com/tiku/uploadfiles/2016-03/479fa0f59a584d5ca0dce6f5868fe20e_.png" style="width: 563px; height: 192px;"/></div>
<div>
【问题3】</div>
<div>
采用PowerPC实现系统隔离和保护的两种机制是：</div>
<div>
第一种是内存管理机制（MMU）。MMU能够实现逻辑地址到物理地址的转化，并且对访问权进行控制，既可以保护系统内核不受应用软件有意或无意的破坏，也可有效防止各应用软件之间的互相破坏。</div>
<div>
 第二种是TRAP系统调用机制。操作系统为实现对内核以及应用之间的保护，提供了用户态和系统态两种运行形态。操作系统内核在系统态运行，因此用户态的应用不能直接调用系统内核提供的功能接口，必须通过TRAP系统调用的方式进行。因此可以实现应用与内核之间的隔离与保护。</div><br/><br/>试题分析<br/><p>本题考查嵌入式架构设计的相关知识。<br/>嵌入式系统的设计和实现是一个较为复杂的工程，涉及软件和硬件基础知识，本题要求按综合化、模块化的设计思想，其中涉及PC、VME总线以及ARINC653操作系统的概念，比较新颖，需要考生仔细阅读题意，结合相关计算机软硬件知识回答问题。<br/>【问题1】<br/>问题1给出了李工的基于FC技术机载嵌入式系统架构和王工的基于VME总线机载嵌入式系统架构，这两种架构都较为常见。若要分析此处使用哪种方案更优，需要与题目已给出的一些信息结合分析。即考虑综合化、模块化的设计思想，以及系统的安全性与可靠性，硬件的扩展与软件的升级。同时要求系统通讯延迟小，支持多模块上的应用任务同步。此外系统要求接收红外、雷达等前端传感器数据并进行处理，将处理结果通过网络发送给数据处理模块。<br/>VME（Versa Module Eurocard）总线是一种通用的计算机总线，结合了Motorola公司Versa总线的电气标准和在欧洲建立的Eurocard标准的机械形状因子，是一种开放式架构。它定义了一个在紧密耦合硬件构架中可进行互连数据处理、数据存储和连接外围控制器件的系统。VME总线采用存储映射方式，多主机仲裁机制，同一时刻由单一主机控制，同时仲裁机制为菊花链方式。针对本系统要求，当多主机设备仲裁时，按菊花链的连接次序将一个主机处理完成后，才能将控制权交给另一个主机来控制总线，导致任务执行延时大，不能满足“系统通讯延迟小”以及“支持多模块上的应用任务同步”的要求。VME数据传输速率为0~500Mbps，而FC的数据传输率为1Gbps到10Gbps。</p><p>FC具有的特点是传输率高，允许在同一接口上传输多种不同的协议，传输距离远，采用单模光纤作为数据传输介质时，传输距离可高达10km；连接简单灵活，误码率低等。<br/>由于FC采用消息包交换机制，支持广播和组播，任务执行并发性好，能满足“系统通讯延迟小”以及“支持多模块上的应用任务同步”的要求；与VME比较，FC实时性好，带宽高；允许在同一接口上传输多种不同的协议，对上层应用实现提供了便利；FC采用消息机制，可扩展性好，如模块较多可采用多个FC网络交换机模块级联；传输距离远，当与外部其他设备相连时，比较方便；系统采用统一的FC网络代替了VME底板总线，降低总线驱动的功耗，简化了底板。所以最后采用FC的系统结构。</p><p>【问题2】<br/>问题2是一个选择题，在解答本题时，关键在于区分不同的错误归属于哪一个错误级别。<br/>模块级错误一般包括：<br/>1、模块初始化时发生的模块配置错误；<br/>2、模块初始化时的其他错误；<br/>3、系统功能执行期间出现的错误；<br/>4、分区切换时发生的错误；<br/>5、电源故障。<br/>分区级错误一般包括：<br/>1、分区初始化阶段出现的分区配置错误；<br/>2、分区初始化阶段出现的其他错误；<br/>3、进程管理中的错误；<br/>4、错误处理进程的错误。<br/>进程级错误一般包括：<br/>1、应用进程产生的应用错误；<br/>2、非法操作系统请求；<br/>3、进程执行错误（溢出、缓冲区冲突等）。<br/> 【问题3】<br/>问题3看似在考技术应用，实质上是考概念。采用PowerPC实现系统隔离与保护有两种机制，这两种机制的详细说明，参看本题试题答案。<br/></p></div>